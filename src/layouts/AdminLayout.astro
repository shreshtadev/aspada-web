---
import { actions } from 'astro:actions'
import { Toaster } from 'svelte-french-toast'
import '../styles/global.css'
const result = Astro.getActionResult(actions.logout)
---

<div class="flex min-h-screen bg-aspada-silver/10">
  {result && !result.error && <script>window.location.href = "/admin/login";</script>}
  <aside class="w-64 bg-aspada-cream/10 text-aspada-steel p-6 flex flex-col">
    <div class="flex-1">
      <h2 class="text-aspada-steel font-bold text-xl mb-10">ASPADA ADMIN</h2>
      <nav class="space-y-4">
        <a href="/admin/projects" class="block hover:text-aspada-steel">Projects</a>
        <a href="/admin/socials" class="block hover:text-aspada-steel">Social Details</a>
        <a href="/admin/gallery" class="block hover:text-aspada-steel">Gallery</a>
        <a href="/admin/company" class="block hover:text-aspada-steel">Company Profile</a>
        <a href="/admin/testimonials" class="block hover:text-aspada-steel">Testimonials</a>
        <a href="/admin/blog" class="block hover:text-aspada-steel">Blog</a>
        <div class="mt-6">
          <p class="text-aspada-steel/50 text-xs font-bold mb-2 uppercase tracking-wider">CRM</p>
          <div class="space-y-2 ml-2 border-l-2 border-aspada-steel/20 pl-3">
            <a href="/crm" class="block hover:text-aspada-steel text-sm">Dashboard</a>
            <a href="/crm/pipeline" class="block hover:text-aspada-steel text-sm">Pipeline</a>
            <a href="/crm/agents" class="block hover:text-aspada-steel text-sm">Agents</a>
            <a href="/crm/admin" class="block hover:text-aspada-steel text-sm">Manage</a>
          </div>
        </div>
      </nav>
    </div>

    <form method="POST" action={actions.logout}>
      <button
        type="submit"
        class="mt-6 w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded font-bold transition-colors cursor-pointer"
      >
        Logout
      </button>
    </form>
  </aside>
  <main class="flex-1 p-10">
    <slot />
    <Toaster client:load />
  </main>
</div>
